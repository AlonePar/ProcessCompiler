<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions targetNamespace="http://www.jboss.org/drools" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" xmlns="http://www.jboss.org/drools" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" id="Definitions_1">

<bpmn2:itemDefinition id="stringType" structureRef="java.lang.String"/>
  
  <!--    process    -->
  
  <bpmn2:process id="assembler.atpExtractMD" name="Extract Metadata" isExecutable="true" processType="Private" drools:version="1" >
    
    <bpmn2:dataObject id="isExtractMDDO" name="Digital Object" itemSubjectRef="stringType" />
    <bpmn2:dataObject id="osExtractMDMD" name="Metadata" itemSubjectRef="stringType" />
    
    <bpmn2:startEvent id="_Start_Event" />    
    
    <bpmn2:scriptTask id="_Script_Task" name="Extract Metadata" scriptFormat="http://www.java.com/java">
      <bpmn2:script>
      		System.out.println("Executing Extract Metadata process to: " + kcontext.getVariable("isExtractMDDO"));
      		kcontext.setVariable("osExtractMDMD", "myMD");
      		System.out.println("Metadata created: " + kcontext.getVariable("osExtractMDMD"));
      </bpmn2:script>
    </bpmn2:scriptTask>
    
    <bpmn2:endEvent id="_End_Event" />
    
    <bpmn2:sequenceFlow id="_Sequence_Flow_1" sourceRef="_Start_Event" targetRef="_Script_Task"/>
    <bpmn2:sequenceFlow id="_Sequence_Flow_2" sourceRef="_Script_Task" targetRef="_End_Event"/>
  
  </bpmn2:process>
  
</bpmn2:definitions>
